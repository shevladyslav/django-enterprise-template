[mypy]
# Add the "src" directory to mypyâ€™s module search path.
# This tells mypy that all imports should be resolved starting from src/,
# e.g. `apps.core.tasks` instead of `src.apps.core.tasks`.
mypy_path = src

# Python version used for static type checking.
# Must strictly match the version declared in pyproject.toml (requires-python),
# otherwise mypy may report invalid syntax or incorrect typing behavior.
python_version = 3.12

# Ignore missing type hints in third-party libraries.
# This is practically mandatory for Django projects because many Django
# internals and ecosystem packages are not fully typed.
ignore_missing_imports = true

# Type-check function bodies even if functions do not have annotations.
# This improves type safety gradually without forcing full type coverage
# across the entire codebase.
check_untyped_defs = true

# Warn if a `# type: ignore` comment is present but not actually needed.
# Helps keep the codebase clean and prevents ignored errors from becoming stale.
warn_unused_ignores = true

# Warn when a `typing.cast()` is redundant.
# Indicates that mypy can already infer the correct type without manual casting.
warn_redundant_casts = true

# Warn about unused, unknown, or misspelled configuration options.
# Prevents silent configuration mistakes that would otherwise be ignored.
warn_unused_configs = true

# Treat directories listed in mypy_path as explicit package roots.
# This prevents mypy from resolving the same file under multiple module names
# (e.g. "apps.core.tasks" vs "src.apps.core.tasks"),
# which is critical for src-based Django project layouts.
explicit_package_bases = true

# Enable Django and Django REST Framework typing plugins.
# These plugins extend mypy with runtime-aware type information for:
# - Django models, managers, and QuerySets
# - Django settings and app configuration
# - Django REST Framework views, requests, responses, and serializers
# This significantly improves type checking accuracy for ORM and DRF code,
# but may require explicit annotations in views and URL configurations.
plugins =
    mypy_django_plugin.main,
    mypy_drf_plugin.main

[mypy.plugins.django-stubs]
# Django settings module used by django-stubs for type inference.
# Must be the fully qualified Python path to your settings package
# (not a file path).
django_settings_module = settings
